name = "crescendai"
main = "build/worker/shim.mjs"
compatibility_date = "2024-12-01"

[build]
command = "./build.sh"

[assets]
directory = "./dist/client"

[[kv_namespaces]]
binding = "KV"
id = "a20cea1f48d9415da9d7ca6418563025"

[[r2_buckets]]
binding = "BUCKET"
bucket_name = "crescendai-bucket"

[[d1_databases]]
binding = "DB"
database_name = "crescendai-db"
database_id = "659755a8-4e9e-4581-a2bd-d34b6f912c3a"

[[vectorize]]
binding = "VECTORIZE"
index_name = "crescendai-piano-pedagogy"

[ai]
binding = "AI"

# Custom domain (must remove from Pages project first)
[[routes]]
pattern = "crescend.ai"
custom_domain = true

[vars]
ENVIRONMENT = "development"
HF_INFERENCE_ENDPOINT = "https://u1oxy7egvq7rnm8z.us-east-1.aws.endpoints.huggingface.cloud"
# Public URL for audio files - HF inference needs publicly accessible URLs
# For local dev with ngrok: PUBLIC_URL = "https://your-ngrok-url.ngrok.io"
PUBLIC_URL = "https://crescend.ai"

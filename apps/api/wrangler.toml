name = "crescendai-api"
main = "build/worker/shim.mjs"
compatibility_date = "2024-12-01"

[build]
command = "cargo install -q worker-build && worker-build --release"

# KV for caching analysis results (create with: wrangler kv:namespace create ANALYSIS_CACHE)
# [[kv_namespaces]]
# binding = "ANALYSIS_CACHE"
# id = "<to-be-created>"

# R2 for audio files (create with: wrangler r2 bucket create crescendai-audio)
# [[r2_buckets]]
# binding = "AUDIO_BUCKET"
# bucket_name = "crescendai-audio"

# Vectorize for RAG (create with: wrangler vectorize create piano-pedagogy --dimensions 768 --metric cosine)
# [[vectorize]]
# binding = "PIANO_KNOWLEDGE"
# index_name = "piano-pedagogy"

# Workers AI for LLM feedback
# [ai]
# binding = "AI"

# Environment variables
[vars]
ENVIRONMENT = "development"

# Secrets (set via: wrangler secret put RUNPOD_API_KEY)
# - RUNPOD_API_KEY
